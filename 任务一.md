# 🎯 任务一最佳处理流程设计

## 1. 数据选择与统一

- **传感器位置选择**：
  - 主通道用 **驱动端（DE）**。理由：离轴承近，信号最清晰；题目也说 DE 用 SKF6205（尺寸参数已给出）。
  - FE/BA 可以作为辅助通道，任务一里不必全都用，但可以预留脚本入口。
- **采样率统一**：
  - 题目里 DE 有 **12kHz 和 48kHz** 两种，FE/BA 只有 12kHz。
  - 统一重采样到 **12kHz**，避免模型“靠采样率作弊”。
- **切片参数**：
  - 窗口长度 **2048 点**，步长 **1024 点**（50% overlap）。
  - 保证每个切片≈0.17秒（12kHz），能包含多个转子周期。

------

## 2. 特征提取（机器能吃 + 人类能懂）

我们需要同时兼顾 **统计可解释性**（给人类看） 和 **机器学习输入**（给模型吃）。

### (a) 时域统计特征（baseline）

- 均值、标准差、RMS
- 偏度、峭度（冲击特征）
- 峰-峰值、峭度因子（敏感于脉冲故障）

### (b) 频域能量特征（粗分布）

- 分频带能量（0–200、200–500、500–1000、1000–2000、2000–4000、4000–6000 Hz）
   👉 可以看出能量在哪些频段“爆棚”，适合跨工况对比。

### (c) 包络谱特征（机理驱动的核心指标）

基于 SKF6205（DE）参数：

- **BPFO**（外圈故障频率）
- **BPFI**（内圈故障频率）
- **BSF**（滚动体自旋频率）
- 在这些频率 ±ΔHz 范围内的 **最大幅值**

👉 这是最“物理”的指标，后续做任务四可解释性时用来对齐 CNN 的 Grad-CAM 或特征重要性。

### (d) RPM（转速）

- 每个文件自带 RPM，取切片平均值。
- 转速是迁移学习的重要变量（不同工况 RPM 不同）。

------

## 3. 数据标签化

- 按 **文件名规则**打标签（N、OR、IR、B + 故障尺寸 + 载荷）。
- 任务一只需做 **二分类（正常 vs 故障）**，所以导出两个版本：
  - **label_bin**（0=正常，1=故障） → 给任务二 baseline 用
  - **label_str**（N/OR/IR/B） → 给后续扩展多分类 & 可解释性用

------

## 4. 可视化展示（让人类看懂）

输出的可视化必须覆盖三类人能看懂的“证据”：

1. **原始切片波形**
   - 正常 vs 故障（DE端），画几段出来。
   - 直观看出故障切片更乱、更冲击。
2. **频谱 / 包络谱**
   - 随机挑一个故障切片，画包络谱；标出 BPFO/BPFI/BSF 理论频率。
   - 让人类直观看到“特征频率附近确实有峰”。
3. **特征分布图**
   - 比如 **峭度箱线图**：正常低、故障高。
   - **band energy 柱状图**：不同类别的能量差异。

------

## 5. 输出成果

- **task1_features.csv**：所有切片的特征矩阵（给机器学习用）。
- **task1_slices_index.csv**：记录切片起点、来源文件、采样率，方便追溯。
- **可视化图文件夹**：正常/故障对比图、包络谱、特征分布图。

------

# 🚀 承接到任务二三四

- **任务二**：直接读 `task1_features.csv`，训练 RF/SVM/CNN baseline。
- **任务三**：利用特征里带的 RPM、包络谱频率幅值，做迁移学习对齐（MMD/DANN）。
- **任务四**：可解释性时，把 CNN 的显著性图和我们提取的物理特征对齐（例如模型关注的频段确实对应 BPFO）。

------

📌 总结一句：
 👉 **任务一最佳方案 = 数据统一（12kHz，切片2048） + 多层次特征（时域+频域+机理+RPM） + CSV导出（机器可用） + 可视化（人类可懂）**。
 这样不仅完成题目要求，还能给任务二三四打好“数据、物理、可解释性”的基础。

------

- 